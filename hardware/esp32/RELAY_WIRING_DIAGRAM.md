# Wiring Diagram - ESP32 + PZEM-004T + 5 Relay Module

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           COMPLETE SYSTEM WIRING DIAGRAM                             â”‚
â”‚       ESP32 + PZEM-004T + 5-Channel Relay Module                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  ESP32 Development Board                      â”‚
    â”‚                                                               â”‚
    â”‚  5V  â”€â”€â”€â”¬â”€â”€â–º PZEM VCC         GPIO 25 â”€â”€â”€â–º Relay 1 (IN1)    â”‚
    â”‚         â”‚                     GPIO 26 â”€â”€â”€â–º Relay 2 (IN2)    â”‚
    â”‚         â””â”€â”€â–º Relay VCC        GPIO 27 â”€â”€â”€â–º Relay 3 (IN3)    â”‚
    â”‚                               GPIO 32 â”€â”€â”€â–º Relay 4 (IN4)    â”‚
    â”‚  GND â”€â”€â”€â”¬â”€â”€â–º PZEM GND         GPIO 33 â”€â”€â”€â–º Relay 5 (IN5)    â”‚
    â”‚         â”‚                                                     â”‚
    â”‚         â””â”€â”€â–º Relay GND        GPIO 16 (RX2) â—„â”€â”€â”€ PZEM TX    â”‚
    â”‚                               GPIO 17 (TX2) â—„â”€â”€â”€ PZEM RX    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  USB Power   â”‚
            â”‚  or 5V PSU   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    5-CHANNEL RELAY MODULE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         5-Channel Relay Module (Active HIGH)                 â”‚
    â”‚                                                              â”‚
    â”‚  VCC â—„â”€â”€â”€ ESP32 5V                                          â”‚
    â”‚  GND â—„â”€â”€â”€ ESP32 GND                                         â”‚
    â”‚                                                              â”‚
    â”‚  IN1 â—„â”€â”€â”€ GPIO 25    [Relay 1] â”€â”€â–º Lampu 1                 â”‚
    â”‚  IN2 â—„â”€â”€â”€ GPIO 26    [Relay 2] â”€â”€â–º Lampu 2                 â”‚
    â”‚  IN3 â—„â”€â”€â”€ GPIO 27    [Relay 3] â”€â”€â–º Lampu 3                 â”‚
    â”‚  IN4 â—„â”€â”€â”€ GPIO 32    [Relay 4] â”€â”€â–º Lampu 4                 â”‚
    â”‚  IN5 â—„â”€â”€â”€ GPIO 33    [Relay 5] â”€â”€â–º Lampu 5                 â”‚
    â”‚  IN6 (Not Used)                                             â”‚
    â”‚  IN7 (Not Used)                                             â”‚
    â”‚  IN8 (Not Used)                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   RELAY TO AC LOAD CONNECTION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Each Relay Connection (Example for Relay 1):

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Relay 1    â”‚
                    â”‚              â”‚
                    â”‚  COM  NO  NC â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”˜
                        â”‚   â”‚   â”‚
                        â”‚   â”‚   â””â”€â”€â”€â”€ Not Used
                        â”‚   â”‚
                   â”Œâ”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”
                   â”‚             â”‚
              From MCB      To Lampu 1
              (Live/Phase)   (Live)


Complete Relay Wiring:

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   MCB    â”‚
            â”‚ (Source) â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                  â”‚ Live (L)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        â”‚        â”‚        â”‚        â”‚        â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
    â”‚ Relay 1 â”‚  â”‚   â”‚ Relay 2 â”‚  â”‚   â”‚ Relay 3 â”‚   â”‚
    â”‚  COM    â”‚  â”‚   â”‚  COM    â”‚  â”‚   â”‚  COM    â”‚   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
         â”‚ NO    â”‚        â”‚ NO    â”‚        â”‚ NO     â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
    â”‚ Lampu 1 â”‚  â”‚   â”‚ Lampu 2 â”‚  â”‚   â”‚ Lampu 3 â”‚   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
         â”‚       â”‚        â”‚       â”‚        â”‚        â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
    â”‚ Relay 4 â”‚  â”‚   â”‚ Relay 5 â”‚  â”‚   Neutral    â”‚   â”‚
    â”‚  COM    â”‚  â”‚   â”‚  COM    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
         â”‚ NO    â”‚        â”‚ NO                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                     â”‚
    â”‚ Lampu 4 â”‚  â”‚   â”‚ Lampu 5 â”‚                     â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
         â”‚       â”‚        â”‚                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        Neutral (N)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PIN MAPPING SUMMARY                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ESP32 GPIO          Component              Function
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GPIO 25        â†’    Relay Module IN1       Control Lampu 1
GPIO 26        â†’    Relay Module IN2       Control Lampu 2
GPIO 27        â†’    Relay Module IN3       Control Lampu 3
GPIO 32        â†’    Relay Module IN4       Control Lampu 4
GPIO 33        â†’    Relay Module IN5       Control Lampu 5

GPIO 16 (RX2)  â†    PZEM TX                Serial Communication
GPIO 17 (TX2)  â†’    PZEM RX                Serial Communication

5V             â†’    PZEM VCC, Relay VCC    Power Supply
GND            â†’    PZEM GND, Relay GND    Ground


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   POWER SUPPLY DIAGRAM                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Option 1: Single 5V Power Supply (Recommended)

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5V Adapter   â”‚
    â”‚ (3A minimum) â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚          â”‚          â”‚          â”‚
   â”Œâ”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ESP32â”‚   â”‚PZEM â”‚   â”‚ Relay  â”‚ â”‚ Relay â”‚
   â”‚ VIN â”‚   â”‚ VCC â”‚   â”‚Module  â”‚ â”‚Logic  â”‚
   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â”‚  VCC   â”‚ â”‚ VCC   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜

Option 2: USB + External PSU

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ USB 5V   â”‚      â”‚ 12V Adapter  â”‚
    â”‚ Computer â”‚      â”‚ for Relays   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ESP32   â”‚        â”‚ Relay Moduleâ”‚
    â”‚  + PZEM  â”‚        â”‚   VIN       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          (Use JD-VCC)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RELAY MODULE JUMPER SETTINGS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Most relay modules have a jumper between VCC and JD-VCC:

Scenario 1: Using ESP32 5V to power relays (LOW POWER loads)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  VCC â•â•â• JD-VCC â”‚  â† Jumper ON (Connected)
    â”‚   â”‚       â”‚     â”‚
    â”‚  ESP32   Relay  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 2: Using external power for relays (HIGH POWER loads)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  VCC     JD-VCC â”‚  â† Jumper OFF (Separated)
    â”‚   â”‚       â”‚     â”‚
    â”‚  ESP32  Ext PSU â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FIREBASE DATABASE STRUCTURE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Firebase Path: /devices/relay

{
  "relay1": false,   // Lampu 1 OFF
  "relay2": false,   // Lampu 2 OFF
  "relay3": false,   // Lampu 3 OFF
  "relay4": false,   // Lampu 4 OFF
  "relay5": false    // Lampu 5 OFF
}

Firebase Path: /devices/relay_status (Read-only, updated by ESP32)

{
  "relay1": false,   // Current status Lampu 1
  "relay2": false,   // Current status Lampu 2
  "relay3": true,    // Current status Lampu 3
  "relay4": false,   // Current status Lampu 4
  "relay5": false    // Current status Lampu 5
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TESTING PROCEDURE                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Test ESP32 Only
    â”œâ”€â–º Upload code to ESP32
    â”œâ”€â–º Open Serial Monitor
    â””â”€â–º Check WiFi & Firebase connection

Step 2: Test Relay Module (NO AC)
    â”œâ”€â–º Connect relay module to ESP32
    â”œâ”€â–º Power on system
    â”œâ”€â–º Listen for relay click sounds
    â””â”€â–º Check Serial Monitor for relay status

Step 3: Test with Firebase Control
    â”œâ”€â–º Open Firebase Console
    â”œâ”€â–º Go to /devices/relay
    â”œâ”€â–º Change relay1: false â†’ true
    â”œâ”€â–º Relay 1 should activate (click sound)
    â””â”€â–º Check /devices/relay_status updated

Step 4: Connect AC Loads (CAREFUL!)
    â”œâ”€â–º Turn OFF main breaker
    â”œâ”€â–º Connect one lamp to Relay 1
    â”œâ”€â–º Double check wiring
    â”œâ”€â–º Turn ON main breaker
    â”œâ”€â–º Test control from Firebase
    â””â”€â–º Verify lamp turns ON/OFF

Step 5: Connect All Lamps
    â”œâ”€â–º Turn OFF main breaker
    â”œâ”€â–º Connect lamps to Relay 2-5
    â”œâ”€â–º Verify all connections
    â”œâ”€â–º Turn ON main breaker
    â””â”€â–º Test each relay individually


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SAFETY PRECAUTIONS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸  WARNING - HIGH VOLTAGE AC 220V!

1. âœ‹ ALWAYS turn OFF main breaker before wiring
2. ğŸ”Œ Use proper AC wire gauge (1.5mmÂ² minimum)
3. ğŸ”’ Secure all AC connections with terminal blocks
4. ğŸ’§ Keep relay module away from water
5. ğŸŒ¡ï¸  Ensure good ventilation (relays generate heat)
6. ğŸ“ Keep AC and DC sides separated
7. ğŸ§ª Test with LOW power loads first (LED bulb)
8. ğŸ‘· Installation by qualified electrician only
9. ğŸ”¥ Use proper enclosure for final installation
10. ğŸ“‹ Label each relay clearly (Lampu 1, 2, 3, etc.)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TROUBLESHOOTING                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problem: Relay tidak click saat di-control
Solution:
    - Check wiring ESP32 GPIO ke Relay IN
    - Check power supply (relay butuh 5V stabil)
    - Verify Firebase path (/devices/relay)
    - Check Serial Monitor untuk error

Problem: Relay click tapi lampu tidak nyala
Solution:
    - Check AC wiring (COM-NO-Load)
    - Verify MCB is ON
    - Check lamp is good (test dengan stop kontak lain)
    - Verify relay NC tidak dipakai

Problem: Relay nyala sendiri
Solution:
    - Check GPIO pin tidak conflict dengan boot pins
    - Pastikan Firebase data tidak berubah sendiri
    - Check grounding (ESP32-Relay share GND)

Problem: ESP32 restart terus saat relay aktif
Solution:
    - Power supply tidak cukup (gunakan minimal 3A)
    - Separate power untuk relay module
    - Tambahkan capacitor 1000uF di VCC ESP32


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BILL OF MATERIALS (BOM)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Qty  Item                         Specification        Approx Price
â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1x   ESP32 Dev Board              ESP32-WROOM-32       Rp  60.000
1x   PZEM-004T                    Version 3.0, 100A    Rp  80.000
1x   5-Channel Relay Module       5V, 10A per relay    Rp  35.000
10x  Jumper Wire F-F              20cm                 Rp  10.000
5x   Jumper Wire M-F              20cm                 Rp   5.000
1x   5V Power Supply              3A minimum           Rp  35.000
5x   AC Wire 1.5mmÂ²               2 meter each         Rp  25.000
5x   Lampu AC                     5-20W LED            Rp  50.000
1x   Terminal Block               10-way               Rp  15.000
1x   Project Box                  20x15x10 cm          Rp  25.000
                                                       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                                TOTAL:  Rp 340.000


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   INSTALLATION CHECKLIST                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Before Power ON:
â˜ All DC wiring connected (ESP32-PZEM-Relay)
â˜ All relay IN pins connected to correct GPIO
â˜ VCC and GND properly shared
â˜ PZEM TXâ†’RX2, RXâ†’TX2 connected
â˜ No short circuits
â˜ AC wiring: COM from MCB, NO to Load
â˜ All AC connections secure in terminal blocks
â˜ No exposed AC wires
â˜ Enclosure properly closed
â˜ Fire extinguisher nearby (for AC testing)

After Power ON (DC only):
â˜ ESP32 boots successfully
â˜ WiFi connected
â˜ Firebase connected
â˜ PZEM readings valid
â˜ Relays respond to Firebase changes
â˜ Serial Monitor shows no errors

After AC Connection:
â˜ Main breaker OFF before connecting
â˜ Each lamp tested individually
â˜ No burning smell
â˜ No sparks or arcing
â˜ Relay modules not overheating
â˜ All lamps controllable from dashboard


âœ… Installation Complete!
ğŸ¯ 5 Lamps Ready for Smart Control via Firebase!
```
